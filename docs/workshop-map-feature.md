# 交互式生产车间布局地图功能

## 功能概述

在统一调度平台的"实时智能调度"模块中新增了交互式生产车间布局地图功能，用户可以通过点击地图上的不同生产线区域来筛选和查看对应的生产数据。

## 功能特性

### 1. 地图集成位置
- 位于"实时智能调度"模块标签页导航的右侧
- 可折叠的地图区域，不影响现有功能

### 2. 交互式区域切换
地图包含以下可点击的生产线区域：
- **逆变器1号线～逆变器8号线**（8个区域）
  - 逆变器1号线：INV-3000W，产能50台/天
  - 逆变器2号线：INV-5000W，产能40台/天
  - 逆变器3号线：INV-8000W，产能35台/天
  - 逆变器4号线：INV-10000W，产能30台/天
  - 逆变器5号线：INV-15000W，产能25台/天
  - 逆变器6号线：INV-20000W，产能20台/天
  - 逆变器7号线：INV-25000W，产能18台/天
  - 逆变器8号线：INV-30000W，产能15台/天
- **PACK生产线**（1个区域）：电池包装配，产能200套/天
- **SMT生产线**（1个区域）：PCBA制造，产能500件/天

### 3. 数据联动更新
当点击地图上的特定生产线区域时，四个标签页的数据会自动筛选和更新：
- **生产调度**：显示选中生产线的人员分配、工单状态、执行情况
- **计划管理**：显示选中生产线的计划看板和缺料情况
- **仓储作业**：显示与选中生产线相关的物料配送、库存状态
- **设备监控**：显示选中生产线的设备状态和推拉信号

### 4. 视觉反馈
- **高亮显示**：选中的生产线区域有蓝色边框和阴影效果
- **悬停效果**：鼠标悬停时显示工具提示，包含生产线详细信息
- **状态指示器**：页面顶部显示当前选择的生产线名称
- **详情面板**：选中生产线后显示实时数据面板

### 5. 响应式设计
- 支持不同屏幕尺寸的自适应显示
- 移动端优化的交互体验

## 使用方法

### 1. 打开车间地图
1. 进入"统一调度平台"页面
2. 在"实时智能调度"模块中，点击右上角的"车间地图"按钮
3. 地图区域会展开显示

### 2. 选择生产线
1. 在地图上点击任意生产线区域
2. 选中的区域会高亮显示
3. 页面顶部的指示器会更新为选中的生产线名称
4. 地图下方会显示该生产线的详细信息面板

### 3. 查看筛选数据
1. 选择生产线后，切换不同的标签页
2. 各标签页的数据会自动根据选择的生产线进行筛选
3. 显示该生产线相关的具体数据

### 4. 重置选择
1. 点击地图区域右上角的"重置选择"按钮
2. 或者点击页面顶部指示器旁的重置按钮
3. 返回全部生产线的汇总数据视图

## 技术实现

### 1. 前端技术栈
- **HTML5 + CSS3**：页面结构和样式
- **JavaScript ES6+**：交互逻辑和数据处理
- **SVG**：矢量图形地图
- **Tailwind CSS**：响应式样式框架

### 2. 核心功能模块
- **地图加载模块**：动态加载SVG地图文件
- **交互事件模块**：处理点击、悬停等用户交互
- **数据筛选模块**：根据选择的生产线筛选数据
- **UI更新模块**：更新界面显示状态

### 3. 数据结构
```javascript
const productionLineData = {
    '生产线名称': {
        id: '唯一标识',
        name: '显示名称',
        type: '产品类型',
        capacity: '设计产能',
        status: '当前状态' // running, idle, maintenance, error
    }
};
```

### 4. 文件结构
```
├── pages/operations-center/unified-scheduling.html  # 主页面文件
├── assets/images/workshop-layout.svg               # 车间布局SVG地图
└── docs/workshop-map-feature.md                   # 功能说明文档
```

## 扩展功能

### 1. 实时数据集成
- 可以集成真实的生产数据API
- 实时更新生产线状态和产量信息
- 支持WebSocket实时数据推送

### 2. 更多交互功能
- 支持地图缩放和平移
- 添加更多生产区域（如质检区、仓储区）
- 支持多选生产线对比

### 3. 数据可视化增强
- 在地图上直接显示关键指标
- 添加热力图显示生产负荷
- 支持历史数据回放

## 注意事项

1. **浏览器兼容性**：建议使用现代浏览器（Chrome 80+, Firefox 75+, Safari 13+）
2. **网络要求**：需要稳定的网络连接以加载SVG地图文件
3. **数据更新**：当前为模拟数据，实际使用时需要连接真实的数据源
4. **性能优化**：大量数据时建议实现分页或虚拟滚动

## 故障排除

### 1. 地图无法加载
- 检查网络连接
- 确认SVG文件路径正确
- 查看浏览器控制台错误信息

### 2. 交互无响应
- 确认JavaScript没有错误
- 检查事件监听器是否正确绑定
- 验证SVG元素的class属性

### 3. 数据不更新
- 检查数据筛选逻辑
- 确认标签页切换功能正常
- 验证数据源连接状态

## 更新日志

### v1.0.0 (2024-08-14)
- 初始版本发布
- 实现基础地图交互功能
- 支持10个生产线区域选择
- 集成四个标签页数据联动
- 添加响应式设计支持
