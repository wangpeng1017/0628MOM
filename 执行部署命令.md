# 设备管理系统部署执行指南

## 🚀 快速部署（推荐）

在PowerShell中执行以下命令：

```powershell
# 进入项目目录
cd e:\trae\0628MOM

# 执行自动化部署脚本
.\deploy-to-github.ps1
```

这个脚本会自动完成：
1. ✅ 替换所有文件到正确的路由名称
2. ✅ 清理临时文件
3. ✅ 提交所有变更到Git
4. ✅ 推送到GitHub

---

## 📋 手动部署（备选方案）

如果自动化脚本无法执行，请按以下步骤手动操作：

### 步骤1: 替换文件

```powershell
# 进入项目目录
cd e:\trae\0628MOM

# 复制新开发的三个模块
Copy-Item "pages\equipment\predictive-maintenance-new.html" "pages\equipment\predictive-maintenance.html" -Force
Copy-Item "pages\equipment\knowledge-base-new.html" "pages\equipment\knowledge-base.html" -Force
Copy-Item "pages\equipment\oee-analysis-new.html" "pages\equipment\oee-analysis.html" -Force

# 复制之前开发的文件到正确的路由名称
Copy-Item "pages\equipment\inspection.html" "pages\equipment\inspection-management.html" -Force
Copy-Item "pages\equipment\spare-parts.html" "pages\equipment\spare-parts-management.html" -Force
Copy-Item "pages\equipment\planned-maintenance.html" "pages\equipment\preventive-maintenance.html" -Force
```

### 步骤2: 清理临时文件

```powershell
Remove-Item "pages\equipment\predictive-maintenance-new.html" -Force
Remove-Item "pages\equipment\knowledge-base-new.html" -Force
Remove-Item "pages\equipment\oee-analysis-new.html" -Force
```

### 步骤3: Git提交

```bash
# 添加所有文件
git add .

# 提交
git commit -m "feat: complete all 8 equipment management modules with correct routing"

# 推送到GitHub
git push origin main
```

---

## ✅ 验证部署

部署完成后，请验证以下内容：

### 1. 检查文件是否存在

```powershell
# 检查所有路由文件
Test-Path "pages\equipment\asset-management.html"
Test-Path "pages\equipment\maintenance-repair.html"
Test-Path "pages\equipment\preventive-maintenance.html"
Test-Path "pages\equipment\inspection-management.html"
Test-Path "pages\equipment\spare-parts-management.html"
Test-Path "pages\equipment\predictive-maintenance.html"
Test-Path "pages\equipment\knowledge-base.html"
Test-Path "pages\equipment\oee-analysis.html"
```

所有命令应该返回 `True`

### 2. 检查JavaScript文件

```powershell
# 检查所有JS文件
Test-Path "assets\js\equipment-maintenance-repair.js"
Test-Path "assets\js\equipment-planned-maintenance.js"
Test-Path "assets\js\equipment-inspection.js"
Test-Path "assets\js\equipment-spare-parts.js"
Test-Path "assets\js\equipment-predictive-maintenance.js"
Test-Path "assets\js\equipment-knowledge-base.js"
Test-Path "assets\js\equipment-oee-analysis.js"
```

### 3. 在浏览器中测试

访问以下URL测试每个模块：

1. http://localhost/pages/equipment.html （设备管理主页）
2. 点击每个模块卡片，确认页面正常加载
3. 测试每个模块的核心功能

---

## 🌐 GitHub Pages配置

如果使用GitHub Pages部署，请确保：

### 1. 启用GitHub Pages

1. 进入仓库设置: https://github.com/wangpeng1017/0628MOM/settings/pages
2. Source选择: `main` 分支
3. 目录选择: `/ (root)`
4. 点击Save

### 2. 访问线上地址

部署完成后，访问：
```
https://wangpeng1017.github.io/0628MOM/
```

### 3. 测试设备管理模块

```
https://wangpeng1017.github.io/0628MOM/pages/equipment.html
```

---

## 🔧 故障排查

### 问题1: PowerShell脚本无法执行

**错误信息**: "无法加载文件，因为在此系统上禁止运行脚本"

**解决方案**:
```powershell
# 临时允许脚本执行
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass

# 然后再执行部署脚本
.\deploy-to-github.ps1
```

### 问题2: Git推送失败

**错误信息**: "Permission denied" 或 "Authentication failed"

**解决方案**:
```bash
# 检查Git配置
git config --list

# 重新配置用户信息
git config user.name "wangpeng1017"
git config user.email "your-email@example.com"

# 如果需要，重新设置远程仓库
git remote set-url origin https://github.com/wangpeng1017/0628MOM.git
```

### 问题3: 页面404错误

**可能原因**: 文件名与路由不匹配

**解决方案**:
1. 检查 `pages/equipment.html` 中的路由配置
2. 确认对应的HTML文件存在
3. 参考 `EQUIPMENT-ROUTING-CONFIGURATION.md` 文档

---

## 📊 部署检查清单

部署前请确认：

- [ ] 所有HTML文件已创建
- [ ] 所有JavaScript文件已创建
- [ ] 文件名与路由配置一致
- [ ] 临时文件已清理
- [ ] Git仓库状态正常
- [ ] 网络连接正常

部署后请验证：

- [ ] GitHub仓库已更新
- [ ] 所有文件已推送
- [ ] 本地文件与远程一致
- [ ] 浏览器测试通过
- [ ] 所有模块功能正常

---

## 📞 支持

如遇问题，请检查：
1. `EQUIPMENT-ROUTING-CONFIGURATION.md` - 路由配置说明
2. `EQUIPMENT-FINAL-THREE-MODULES-COMPLETION-REPORT.md` - 开发完成报告
3. GitHub仓库: https://github.com/wangpeng1017/0628MOM

---

**创建时间**: 2024-10-30  
**最后更新**: 2024-10-30
